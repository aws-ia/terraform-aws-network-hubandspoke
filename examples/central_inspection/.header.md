# AWS Hub and Spoke Architecture with AWS Transit Gateway - Example: Central Inspection

In this example, we are building a Hub and Spoke architecture with centralized traffic inspection (East/West and North/South). The following resources are created using the Hub and Spoke module:

- AWS Transit Gateway.
- Transit Gateway Route Tables (Spokes, and Inspection).
- Inspection VPC, with Internet access.  

Outside of the module, the following resources are created:

- Two Spoke VPCs, which definition can be found in *variables.tf*. The VPCs have VPC Flow Logs enabled, with Amazon CloudWatch Logs as destination.
- AWS Systems Manager VPC endpoints, which definition can be found in *locals.tf*. The module **vpc_endpoints** creates the VPC endpoints and the Security Groups to apply (as per the definition in *locals.tf*) in each Spoke VPC.
- EC2 instances in all the Spoke VPCs (1 in each Availability Zone defined), and the Security Groups to use by the instances as per defined in *locals.tf*. The module **compute** creates these resources.
- All the IAM roles (the ones needed to publish the VPC Flow Logs in CloudWatch logs) and the KMS Key to encrypt these logs are created in the **iam_kms** module.

![Architecture diagram](https://github.com/aws-ia/terraform-aws-network-hubandspoke/blob/346b078adc3fc6ace62de2ba216a9ef92666b71b/examples/central_inspection/images/architecture_diagram.png)